1. 介绍一下JavaScript的执行上下文

  执行上下文相当于一个区域，里面存放了变量，也可以执行代码。作用域指当前变量存放的位置。

2. 介绍一下JavaScript的作用域链
  
  函数创建时：
    => 创建一个堆（用来存代码字符串和对应的键值对）
    => 然后初始化当前函数的作用域
  函数执行时：
    => 创建一个新的执行上下文EC, 压缩到栈里执行。
    => 初始化this的指向
    => 初始化作用域链
    => 创建AO变量对象用来存储变量
        => 初始化arguments实参集合
        => 创建形参并赋值
        => 执行代码

  函数创建时，会在当前执行上下文中创建一个作用域。执行时会创建一个新的执行上下文，碰到函数创建再当前执行上下文继续创建作用域，形成一个作用域链。
  比如执行函数的时候，碰到变量，会现在当前作用域中查找，若没有声明，则继续往上一个作用域查找，一直找不到变量，就报错。


3. 介绍一下JavaScript的闭包（什么是闭包，应用场景，优缺点）
  
  1.一般一个函数就是一个闭包，它形成一个全新的执行上下文，保护了里面作用域的变量，与外面的作用域互不干扰。

  2.一个函数形成一个全新的执行上下文，执行完之后，里面的堆被外面变量占用，导致无法销毁，内部的作用域保存了下来，以供其他的变量调用。

  优点：频繁调用这个函数，可减少内存开销。
  
  缺点： 占用内存。

b站视频： [堆栈内存及闭包作用域的核心原理](https://www.bilibili.com/medialist/play/ml934774345)

总结： 1. 对象的属性名只能是字符串，如果是引用类型，会转换成字符串
    
      ```
        let a = {
          x: 100
        }
        let b = {
          y: 100
        }
        let obj = {}
        obj[a] = 'a' //obj[a.toString()] 对引用类型进行了toString转换
        obj[b] = 'b'
        console.log(obj[a] === obj[b]) // true
      ```

      2. 浏览器中堆栈内存的底层处理

          编译器
            词法解析
            AST抽象语法树
            构建出浏览器能执行的代码
          JS引擎
            变量提升
            作用域/闭包
            变量对象
            堆栈内存
            VO(变量对象)/GO(全局对象)/AO(活动对象， 函数)/EC(执行上下文)/ECStack(执行环境栈，栈内存)
  
          Js引擎想要执行代码
          => 创建一个执行栈（ECStack）
          => 创建执行上下文（EC）
          => 把执行上下文压进栈（进栈执行）
          => 执行完有的上下文没用了，出栈执行；有的还要用，会把其压缩到栈底（闭包）


        2.1. 数据存储
          基本数据类型直接在栈内存中存储，变量指向该栈内存。
          引用类型在堆内存中存储，并生成一个16进制的堆内存名，变量指向该堆内存名。
          垃圾回收机制：谷歌浏览器会在空闲的时候把所有不被占用的堆内存进行回收；IE浏览器，当前堆被占用1次，数字累加，当前取消占用，数字减1，直到0则销毁（计数出错，造成内存泄露）。
        
        2.2 函数创建
          创建一个堆，存储函数代码字符串和对应的键值对
          初始化当前函数作用域（所在执行上下文中创建一个作用域）

        2.3. 函数执行过程全局上下文（(EC(G)）碰到函数执行，先把正在执行的上下文压入栈底，执行函数上下文（EC(FN)），执行完之后没被占用就出栈，把之前的上下文提上来执行）
          初始化arguments实参集合（非严格模式下与形参形参映射， ES6箭头函数中没有arguments）
          创建形参并赋值
          代码执行

      3. this执行主体
          第一种： 函数执行，调用函数的对象 （自执行函数一般都执行windows）
          第二种： 给元素的实践行为绑定方法，元素触发，执行方法，此时this一般指向元素本身(IE8以下特殊)

